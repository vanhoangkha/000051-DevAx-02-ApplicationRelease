[
{
	"uri": "/",
	"title": "Configure app auto-release",
	"tags": [],
	"description": "",
	"content": "Configure app auto-release In this workshop, you\u0026rsquo;ll automate the manual process you used in the first lesson DevAx::academy - Converting a Monoliths Application to Deploy a TravelBuddy Java App to Elastic Beanstalk - Deploy on tomcat environment. You will use the AWS Developer Tools CodeStar service to provide a Continuous Integration/Continuous Delivery (CI/CD) pipeline. You will also get to test deploying a Windows Service to an EC2 virtual machine that you manage directly using the AWS CodeDeploy service In this lab, you will use the following AWS Developer Tools services:\nAWS CodeStar AWS CodeStar enables you to quickly develop, build, and deploy applications on AWS. AWS CodeStar provides a unified user interface, enabling you to easily manage your software development activities in one place. With AWS CodeStar, you can set up your entire continuous delivery toolchain in minutes, allowing you to start releasing code faster. AWS CodeStar makes it easy for your whole team to work together securely, allowing you to easily manage access and add owners, contributors, and viewers to your projects. Each AWS CodeStar project comes with a project management dashboard, including an integrated issue tracking capability powered by Atlassian JIRA Software. With the AWS CodeStar project dashboard, you can easily track progress across your entire software development process, from your backlog of work items to teams’ recent code deployments.\nAWS CodeCommit AWS CodeCommit is a fully-managed source control service that makes it easy for companies to host secure and highly scalable private Git repositories. CodeCommit eliminates the need to operate your own source control system or worry about scaling its infrastructure. You can use CodeCommit to securely store anything from source code to binaries, and it works seamlessly with your existing Git tools.\nAWS CodeBuild AWS CodeBuild is a fully managed continuous integration service that compiles source code, runs tests, and produces software packages that are ready to deploy. With CodeBuild, you don’t need to provision, manage, and scale your own build servers. CodeBuild scales continuously and processes multiple builds concurrently, so your builds are not left waiting in a queue. You can get started quickly by using prepackaged build environments, or you can create custom build environments that use your own build tools. With CodeBuild, you are charged by the minute for the compute resources you use\nAWS CodePipeline AWS CodePipeline is a continuous integration and continuous delivery service for fast and reliable application and infrastructure updates. CodePipeline then builds, tests, and deploys your application according to the defined workflow every time there is a code change. This allows you to deliver features and updates quickly and reliably. You can easily build an end-to-end solution using pre-made plugins for popular third-party services like GitHub, or integrate your own custom plugins at any stage. during your release. With AWS CodePipeline, you only pay for what you use. No upfront fees or long-term commitments.\nAWS CodeDeploy CodeDeploy is a deployment service that automates application deployments to Amazon EC2 instances, on-premises instances, serverless Lambda functions, or Amazon ECS services. You can deploy a nearly unlimited variety of application content, such as Code, Web and configuration files, Packages, Scripts, Multimedia files, v.v. CodeDeploy can deploy application content that runs on a server and is stored in Amazon S3 buckets, GitHub repositories, or Bitbucket repositories. You do not need to make changes to your existing code before you can use CodeDeploy. AWS CodeDeploy makes it easier for you to release new features, avoid downtime during application deployment and handle the complexity of updating your applications, without many of the risks associated with error-prone manual deployments.\nContent After completing the workshop, you will be able to:\nUse a Java monoliths application running Spring on Tomcat on a common compute environment and do a \u0026rsquo;lift-and-shift\u0026rsquo; to Amazon Elastic Beanstalk PaaS with CI/CD pipeline for automatic updates, using AWS CodeStar Use Eclipse IDE to connect and test project source code from an AWS CodeCommmit repository set up by AWS CodeStar. Make changes to the source code, commit and push those changes to AWS CodeCommit to trigger automatic generation through AWS CodePipeline. Spin-up EC2 manually runs Windows and uses AWS CodeDeploy to deploy Windows Service to virtual machines. Understand how to obtain Administrator credentials for EC2 VMs running Windows. Technical knowledge required To be able to complete this lab, you should be familiar with:\nAWS Management Console basics. Edit the script with the editor. Using Eclipse editor and Java programming language Environment All the resources needed to start the practice are provided in the CloudFormation template, use this template to initialize the resources for the practice. The following diagram depicts the resources deployed in the lab.\n"
},
{
	"uri": "/1-prerequisites/",
	"title": "Preparation",
	"tags": [],
	"description": "",
	"content": "In this section, we will use CloudFormation to create the necessary resources for the workshop.\n"
},
{
	"uri": "/2-configure-release-automation/1-setup-codestar-project/",
	"title": "Configure AWS CodeStar project",
	"tags": [],
	"description": "",
	"content": "Setting up an AWS CodeStar project Access to AWS VPC dashboard. Select Your VPCs. We should see a VPC named Module2/DevAxNetworkVPC. Select Subnets on the left menu và filter by VPC ID of Module2/DevAxNetworkVPC VPC ở menu bên trái và lọc theo VPC ID của VPC Module2/DevAxNetworkVPC. We should see 4 subnets - 2 privates and 2 public. Open CodeStar dashboard. Select Create project. We should see many project template. If you see a message related to the missing service role. Select Create service role\n6. Cause our monolith is written by Java and we are going to deploy an application, in the search panel, select the options:\nAWS Elastic Beanstalk Web Application Java This will list the template tags that match the request - select the tag Java Spring - Web Application\nIn the next page, enter TravelBuddy for Project name. In repository section, make sure that CodeCommit is selected and repository name (Travel Buddy) is auto filled. In EC2 Configuration section, select t3.medium for Instance Type Select vpc match the VPC name of the exercise. Select Subnet is public subnet id seen above. Select KPforDevAxInstances keypair. Select Next Select Create Project The CodeStar will start creating a pipeline. After a few minutes, the new project is displayed. While waiting for project creation completed, explore the IDE tab and learn how to access the project source code. On the left menu, select Team. Select Add team member. We will add an existing user awsstudent. In the Select user section, select awsstudent CodeStar requires members to have an email address. Therefore, remember to add an email address for the user. In Role Type section, select Owner. Select Remote Access. Click Add team member. Next, we will create a new user. Click Add team member. In User section, select Create new IAM user. This will redirect you to IAM Management to create a user. In IAM Management Console, enter user-lab02 for username, select both access types: Programmatic access and AWS Management Console access. Click Next: Permissions. Select Attach existing policies directly and select AdministratorAccess. Chọn Next: Tags Click Next: Tags, tag the user if needed or click Next: Review to review the configure. Click Create User and Click Download .csv file to download file that contains a secret key and an access key.This information will be used in the following part. Click Close and back to CodeStar page. Click refresh symbol to refresh user list, select user-lab02 just created Enter email for user, select Owner in Project role section, tick Remote Access and click Add team member . Now, we will create credentials to use for Codecommit for the newly created user. Access to IAM console. Select Users on the left menu. Click newly created user Select Security Credentials tab. Scroll down to HTTPS Git credentials for AWS CodeCommit section and click Generate Credentials Click Download credentials, then click Close. CodeStar has now configured a CI/CD pipeline to deliver our project artefact to a public Elastic Beanstalk PaaS web server. This will take a few minutes, check the link in the path and click this link and check the your new java HelloWorld application has been created.\nAccess CodeStar and select Projects Select TravelBuddy, then select Pipeline tab. Bạn sẽ thấy 3 giai đoạn được tạo Source, Build và Deploy. You can click View application in the upper right corner to access to your running application. "
},
{
	"uri": "/4-deploy-windows-service/1-create-ec2-instance/",
	"title": "Create EC2 instance",
	"tags": [],
	"description": "",
	"content": "In this section, you will use the AWS Console to create 2 Windows EC2 virtual machines and access them remotely.\nNavigate to EC2 console, select Instances and click Launch instance. Enter instance name, such as: idevelop. Enter 2 for number of instances. Select Windows type for AMI. Select Microsoft Windows Server 2022 Base AMI Select KPforDevAxInstances for Keypair. Leave the default configuration for the Network settings section. In Advanced details: On IAM Role section, select awscodestar-travelbuddy-xxx Scroll to User data section, paste in the following content: \u0026lt;powershell\u0026gt; Set-ExecutionPolicy RemoteSigned -Force Import-Module AWSPowerShell $REGION = (ConvertFrom-Json (Invoke-WebRequest -Uri http://169.254.169.254/latest/dynamic/instance-identity/document -UseBasicParsing).Content).region New-Item -Path c:\\temp -ItemType \u0026#34;directory\u0026#34; -Force powershell.exe -Command Read-S3Object -BucketName aws-codedeploy-$REGION -Key latest/codedeploy-agent-updater.msi -File c:\\temp\\codedeploy-agent-updater.msi // Start-Sleep -Seconds 30 *optional c:\\temp\\codedeploy-agent-updater.msi /quiet /l c:\\temp\\host-agent-updater-log.txt \u0026lt;/powershell\u0026gt; Here is a Powershell script to automatically download and install CodeDeploy Agent for Windows.\nClick Launch instance. Instances have been created. You don\u0026rsquo;t have to wait for instances to complete initialization - continue to the next sections.\n"
},
{
	"uri": "/1-prerequisites/1-create-environment/",
	"title": "Prepare Environment",
	"tags": [],
	"description": "",
	"content": "Prepare environment In this part, we will use the CloudFormation template that provided and pre-installed the necessary resources.\nWe will reuse the KPforDevAxInstances.PEM Keypair created in the previous workshop for virtual machines. Or you can review the previous workshop to see how to create a keypair.\nDownload the CloudFormation template file to install the necessary components for the workshop.\nTemplate\rModule2.template.yaml\r(40 ko)\rAccess the AWS CloudFormation Select Create stack, select With new resources (standard) In Prerequisite - Prepare template section, select Template is ready In Template source section, select Upload a template file, click Choose file and choose the downloaded template file. Click Next Enter stack name at Stack name section. Select KPforDevAxInstances keypair for EEKeyPair section and click Next Click Next in Configure stack options page. Click Create stack We need to wait about more than 30 minutes for the resources to be initialized and configured. "
},
{
	"uri": "/3-automate-application-deployment/1-replace-application/",
	"title": "Replace sample application",
	"tags": [],
	"description": "",
	"content": "Since we are about to make changes to the source code, you should use Git to create a new branch. You can do this via the command line or using the Eclipse IDE. Name the new branch new-implementation. To create and switch to a new branch in Eclipse perform the following steps:\nRight click on the project, select Team Select Switch To , select New Branch… Enter new branch name is new-implementation and click Finish. In this case, we will use the command line.\nOpen terminal and access the directory: C:\\Users\\Administrator\\git\\TravelBuddy Run the command line: git checkout -b new-implementation to create and switch to the new branch. Download TravelBuddy.zip file and extract it. Attachments\rTravelBuddy.zip\r(4888 ko)\rDownload this file by browser in the virtual machine you are running.\nIn the Eclipse IDE, right click on the root element of the TravelBuddy project and select Show In -\u0026gt; System Explorer. Delete src and target folders.\nCopy the contents of the extracted TravelBuddy folder (source folder) to the folder you just opened from the Eclip IDE (destination folder). You can delete the .ebextensions folder in the destination folder before performing the copy, or select Replace to ensure that the files and folders are overwritten correctly.\nYou will see in the .ebextensions folder there are 3 files, one is the parameters you need to update with the RDS endpoint, the other two are pre-generated with the codecommit setting - set-instance-credit-unlimited.config sshd. config.\nOpen env_vars.config file in .ebextensions folder and replace value to RDS endpoint:\noption_settings:\r- namespace: aws:elasticbeanstalk:application:environment\roption_name: JDBC_CONNECTION_STRING\rvalue: \u0026lt;REPLACE YOUR DETAIILS HERE\u0026gt; You can get your RDS value by logging into the AWS Console, accessing the running RDS instance and getting the endpoint information from there, and adding it to the env_vars.\nYou can also get this parameter from the cloudformation stack in the Output section of the Cloudformation stack created at the beginning of the workshop.\nUpdate Python version. Open .ebextensions/sshd.config file: Edit python27-devel to python3-devel. Edit python27-pip to python3-pip. Edit /etc/init.d/sshd restart to sudo service sshd restart. Open .ebextensions/set-instance-credit-unlimited file: Edit pip install awscli –upgrade –user to pip3 install awscli –upgrade –user Right click on the root project and select Maven | Update Project | OK When the update is complete, you will see project folder structure similar to the below image: You have just changing the source code, now you need to add the files you just changed to the new-implementation branch and commit it.\nUse the terminal, access to TravelBuddy folder.\nEnter git status to list changes of source code. Enter git config --global user.email \u0026quot;you@example.com\u0026quot; Nhap git config --global user.name awsstudent Enter git add . to add changed files. Enter git commit -m \u0026quot;Baseline implementation\u0026quot; to commit the changes. Enter git checkout master to switch to master branch. Merge the changes of the new-implementation branch to the master branch with the command - git merge new-implementation Check again with git status command. To push these changes to CodeCommit, in Eclipse, right click on the project root và select Team | Push to Origin… Click Close. It will take a few minutes to push code and running.\nTo make the application accessible to the database, update the security rule.\nOpen EC2 console.\nClick Security Groups on the left menu.\nSelect DBSecurityGroup Click Edit inbound rules Click Add rule. Select MySQL/Aurora service. Select SecurityGroup ID from travelbuddyapp. Select Save rules. Caching In this part, we will speed up building by storing artifacts (e.g. java packages) in an S3 bucket that can be used on the next build.\nOpen buildspec.yml file, you will see the below lines: cache:\rpaths:\r- \u0026#39;/root/.m2/**/*\u0026#39; Open the terminal.\nExecute the below commnad to create a new caching bucket. Replace with the name you want.\naws s3 mb s3://cachingbucket-\u0026lt;YOURNAME-NO-SPACES\u0026gt; The AWS CodeBuild needs to access to the cache bucket, so we need IAM permissions name. Open AWS Console and access IAM.\nSelect Policies tab and find CodeStar_travelbuddy_PermissionsBoundary policy.\nSelect Edit policy. In the editor, select JSON and add the following policy: { \u0026#34;Sid\u0026#34;: \u0026#34;CBCachePolicy\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;s3:*\u0026#34;, \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:s3:::cachingbucket-\u0026lt;YOURNAME-NO-SPACES\u0026gt;\u0026#34;, \u0026#34;arn:aws:s3:::cachingbucket-\u0026lt;YOURNAME-NO-SPACES\u0026gt;/*\u0026#34; ] }, Select Review policy Select Save changes.\nOpen AWS Codestar and select your project\u0026rsquo;s Pipeline tab.\nSelect AWS CodeBuild in Build section of Pipeline Select Edit, and select Artifacts After Additional Configuration section, unchecked Allow AWS CodeBuild to modify this service role so it can be used with this build project Select Amazon S3 for Cache type. Select the bucket you created to store cache. Click Update artifacts After deployment, select Application Endpoint on the CodeStar dashboard page. You will see the TravelBuddy website deployed on an Elastic Beanstalk environment. "
},
{
	"uri": "/5-monitor-service/1-monitor-service/",
	"title": "Using Eclipse IDE",
	"tags": [],
	"description": "",
	"content": " In AWS CodeDeploy Console, select Deployments Select deployment name with deploymentID same as deploymentID returned from CLI in the privous section. Scroll down to Deployment Lifecycle Events, you will see 2 EC2 VMs tagged and belonging to the deployment group. One of the 2 will be In Progress and the other is Pending, because we used the CodeDeployDefault.OneAtATime configuration behavior in the CLI call. This forces CodeDeploy to only deploy updates to one server at a time. Shortly, the status will change and you will be able to see the events. Click View Events to display events for the virtual machine(s) as they are deployed. "
},
{
	"uri": "/2-configure-release-automation/",
	"title": "Configure automatic release",
	"tags": [],
	"description": "",
	"content": "In this section, you will connect to your Windows Development Host. We will use provided Windows Development environment to run this lab.\n"
},
{
	"uri": "/5-monitor-service/2-optional-confirm-codedeploy-agent/",
	"title": "(Optional) Confirm installation of CodeDeploy agent",
	"tags": [],
	"description": "",
	"content": "This is an optional step. If you experience problems during deployment, you will need to investigate the status of the CodeDeploy agent on the virtual machines. Or even if you don\u0026rsquo;t have any issues to track down, you can find out what the Heartbeat service is up to. To connect to Windows virtual machines you must use the PEM file containing the KeyPair generated during the installation process, to decrypt the Windows password, and then use the Microsoft Remote Desktop client to connect to the virtual machine.\nGo to EC2 Management Console. Select one of the 2 virtual machines tagged idevelop. Select Connect. Select RDP client tab and select Download remote desktop file to download the RDP file. Click Download remote desktop file. Select KPforDevAxInstances keypair to decrypt Windows virtual machine\u0026rsquo;s password. Click Decrypt password. Copy password. Use password and RDP file to access to Windows virtual machine.\nIn Windows virtual machine, open c:\\temp\\host-agent-install-log file.\nCheck and make sure that there are no lines with errors, such as: Failed to connect to server because this is an error that occurred during the installation.\nIf something goes wrong during the installation, you can try re-running it yourself with the following commands:\nc:\\temp\\codedeploy-agent.msi /l*v c:\\temp\\host-agent-install-log.txt After re-install, check c:\\temp\\host-agent-install-log file again. If no error appears, the new creation progress of CodeDeploy is likely to succeed. You can create a new one with the AWS CLI command: aws deploy create-deployment --application-name idevelopDemo --deployment-group-name HeartbeatInstances --deployment-config-name CodeDeployDefault.AllAtOnce --description \u0026#34;Retrying Initial Deployment\u0026#34; --s3-location bucket=idevelop-codedeployartefacts-\u0026lt;yourinitials\u0026gt;,key=CodeDeployHearbeatDemo.zip,bundleType=zip Replace with your name the same as the name of the S3 bucket created in the previous step. The ZIP file will be copied to the S3 bucket.\nHeartbeat service installation confirmed successfully Assuming the CodeDeploy agent is successfully installed and running, and you want to confirm the deployment of the Heartbeat service successfully, you can perform the following steps:\nUse Service Control Manager to find AWS Heartbeat Demo Service. If this service shows Running in SCM, the service has been installed successfully. Open c:\\Logs folder. The HeartBeatService file in this folder will contain following ouput if it launches successfully: [INFO]09/14 08:33:18 - Initialising Heartbeat Service...\r[INFO]09/14 08:33:18 - Heartbeat Service is now running...\r[INFO]09/14 08:33:18 - Heartbeat - Deploy has Worked on Tuesday! Iteration 1\r[INFO]09/14 08:33:19 - Heartbeat - Deploy has Worked on Tuesday! Iteration 2\r...\r... "
},
{
	"uri": "/3-automate-application-deployment/2-challenge-deploy-through-pipeline/",
	"title": "Challenge - Deployment via Pipeline",
	"tags": [],
	"description": "",
	"content": "In this part, you will make a change to your application, commit and push those changes to trigger CodePipeline process to rebuild and deploy your project to an Elastic Beanstalk environment. Here are the general steps you can follow to make a change to the index.jsp file and push that change to git, which will trigger the CI/CD pipeline to build and deplooy the session\u0026rsquo;s new version of the application.\nCreate new a branch. Find index.jsp. Change the text displayed. Commit the change. Switch to master branch. Merge the changes. Push the branch back to the origin. Re-access the application path when deploying changes to the Elastic Beanstalk environment. You should click on the various components in the CodeStar project dashboard and review the operations being performed by CodeBuild, CodePipeline, and Elastic Beanstalk.\nCheck the application to confirm the changes have been implemented as expected.\n"
},
{
	"uri": "/2-configure-release-automation/2-connect-to-codecommit/",
	"title": "Connect to Eclipse IDE with AWS Codecommit",
	"tags": [],
	"description": "",
	"content": "This the section, you will connect to Eclipse IDE with AWS CodeCommit.\nIn AWS CodeStar dashboard, select IDE tab. Select Eclipse and select View Instructions. You will use the IAM user you created earlier to configure AWS Codecommit. Make sure you have the user IAM secret key and access key that you downloaded earlier. Access to the Windows virtual machine, open Eclipse. On first startup, Eclipse will ask you to configure the workspace. Tick Use this as the default and do not ask again and click Launch. If the AWS Toolkit is pre-installed on Eclipse, a dialog box appears - Welcome to the AWS Toolkit for Eclipse. Enter Access Key and Secret Key at this dialog. Click Finish If not already installed, you can install AWS Toolkit by selecting Help, selecting Install new software In the drop-down menu, find https://aws.amazon.com/eclipse and select the below tools: AWS Developer Tools AWS Deployment Tools Then, click Next. If the Next button cannot be pressed, you do not need to install the tools.\nClick Next. In Review window, click Next. Select I accept the terms of the license agreements and click Finish After the installation is done, click Restart Now If you have already set the information in step 6, skip steps 13 to 16. Open Eclipse IDE, find AWS symbol, click the drop-down arrow and select Preferences… Setting Default Profile to default. Enter Profile credentials information to Profile Details dialog box. Click Apply and Close. Select AWS symbol and select Import AWS CodeStar Project…. Select the region where the practice is being conducted in Account and region section. Select TravelBuddy and TravelBuddy repository. Enter downloaded git credentials in the previous part to Configure Git credentials section. Click Next. An error dialog may appear, which you can dismiss by selecting OK. Click Next. Leave other information as default and press Finish. The IDE will pull the files from the CodeCommit repository and prepare them for you to start coding. There may be an error with this downloaded source code, however you can ignore it as you will not be using it other than check it out in the next step.\nTake a moment to look at the project structure before you can continue. This Hello World sample application presents a web page to the user and connects to a standard Spring controller. So you have finished connecting and pulling source code from CodeCommit to Developer machine. In the next step, we will change code and release the new version of the appliction to Elastic Beanstalk.\n"
},
{
	"uri": "/4-deploy-windows-service/2-create-code-deploy-application/",
	"title": "Create CodeDeploy application and Deployment Group",
	"tags": [],
	"description": "",
	"content": "In this section, you will use the CodeDeploy console to create an application and the Deployment Group as the target for CodeDeploy to deploy the software into.\nAccess to CodeDeploy. Select Create application. In Create application page, enter idevelopDemo for Application name Select EC2/On-premises for Compute Platform section. Select Create application Select Create deployment group Enter HeartbeatInstances for Deployment group name In Service role ARN section, enter CodeDeployServiceRole and select full ARN of role from list. Scroll down to Environment configuration section. Select Amazon EC2 Instances tab. In Tab group 1 section, select Name for Key. Chọn idevelop cho mục Value In Matching instances section, you will see 2 instance, those instances are eligible to be a target for this Deployment Group, because the Name tag is idevelop. Select Create Deployment Group CodeDeploy application and Deployment Group will be created. You are now ready to deploy the software to the virtual machines.\n"
},
{
	"uri": "/3-automate-application-deployment/",
	"title": "Application Deployment",
	"tags": [],
	"description": "",
	"content": "In this section, you will:\nUpdate the source code in Eclipse, overwrite the sample application and replace it with the TravelBuddy website. You will then commit the source code changes to CodeCommit to enable deployment into the Elastic Beanstalk environment. "
},
{
	"uri": "/5-monitor-service/3-optional-use-sdk-query-elastic-beanstalk/",
	"title": "(Optional) Using the SDK to query Elastic Beanstalk",
	"tags": [],
	"description": "",
	"content": "Trong phần này, bạn sẽ sử dụng Java SDK để kiểm tra môi trường AWS của mình và truy vấn thông tin về Elastic Beanstalk.\nDownload BeanstalkManager.zip file. BeanstalkManager is a sample Java application that uses the AWS Elastic Beanstalk API SDK. Attachments\rBeanstalkManager.zip\r(7 ko)\rUnzip and open the project in Eclipse IDE. Run Unit Test for this application. Unit Test will return the following information: List applications registered with Elastic Beanstalk in the default region. List registered applications and Application Versions. If you don\u0026rsquo;t see any results, you have selected the wrong region. Check the file src/main/java/idevelop.samples/AmazonElasticBeanstalkClientFactory.java to see if you have selected the correct region.\nThis sample application gives you an idea of how you can use the SDK to retrieve information about your Elastic Beanstalk environment.\n"
},
{
	"uri": "/4-deploy-windows-service/3-create-deployment-s3-bucket/",
	"title": "Create S3 Bucket Deployment",
	"tags": [],
	"description": "",
	"content": "AWS CodeDeploy requires deployment artefacts to be stored in an S3 bucket. In this section, we will create a bucket for that purpose, using the AWS CLI.\nOpen terminal and use the following command: aws s3 mb s3://idevelop-codedeployartefacts-\u0026lt;yourinitials\u0026gt; Replace with your name so that the bucket name is unique.\n"
},
{
	"uri": "/3-automate-application-deployment/3-problem-determination/",
	"title": "Determine error",
	"tags": [],
	"description": "",
	"content": "Check buildspec.yml file The buildspec.yml file is an important part that you need to ensure the accuracy of this file. This file will run through the stages which you can see in the console under CodeBuild in its log. This file is divided into several parts\ninstall - type of installation in which you want to run the code. In this case we will use openjdk8.\nphases:\rinstall:\rruntime-versions:\rjava: openjdk8\rcommands:\r- pip install --upgrade awscli Next are the commands you want to run before executing the build project. This is required before building the project. And in this example, we will run the mvn command to compile all the necessary settings.\npre_build:\rcommands:\r- mvn clean compile test Next is to create the build stage\nbuild:\rcommands:\r- mvn war:exploded After mvn build, is how to set required environment for each environment in .ebextensions to be read by required applications\npost_build:\rcommands:\r- cp -r .ebextensions/ target/travelbuddy/\r- aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template-file template-export.yml\r# Do not remove this statement. This command is required for AWS CodeStar projects.\r# Update the AWS Partition, AWS Region, account ID and project ID in the project ARN on template-configuration.json file so AWS CloudFormation can tag project resources.\r- sed -i.bak \u0026#39;s/\\$PARTITION\\$/\u0026#39;${PARTITION}\u0026#39;/g;s/\\$AWS_REGION\\$/\u0026#39;${AWS_REGION}\u0026#39;/g;s/\\$ACCOUNT_ID\\$/\u0026#39;${ACCOUNT_ID}\u0026#39;/g;s/\\$PROJECT_ID\\$/\u0026#39;${PROJECT_ID}\u0026#39;/g\u0026#39; template-configuration.json\rartifacts:\rtype: zip\rfiles:\r- template-export.yml\r- template-configuration.json Check CodeBuild console Check CodeBuild console and check if any errors appear during deployment. If yes, select view details to see what error occurred. Select Buildlog tab and scroll down to error log. In this example, you may find the root access address in the template.yml file is incorrect.\nUnable to upload artifact target/ROOT referenced by SourceBundle parameter of EBApplicationVersion resource.\rParameter SourceBundle of resource EBApplicationVersion refers to a file or folder that does not exist /codebuild/output/src812543603/src/target/ROOT\r[Container] 2020/06/05 02:16:17 Command did not exit successfully aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template-file template-export.yml exit status 255\r[Container] 2020/06/05 02:16:17 Phase complete: POST_BUILD State: FAILED\r[Container] 2020/06/05 02:16:17 Phase context status code: COMMAND_EXECUTION_ERROR Message: Error while executing command: aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template-file template-export.yml. Reason: exit status 255 Here is the error in the template.yml file that needs to be changed:\nEBApplicationVersion:\rDescription: The version of the AWS Elastic Beanstalk application to be created for this project.\rType: AWS::ElasticBeanstalk::ApplicationVersion\rProperties:\rApplicationName: !Ref \u0026#34;EBApplication\u0026#34;\rDescription: The application version number.\rSourceBundle: \u0026#34;target/ROOT\u0026#34; to\nEBApplicationVersion:\rDescription: The version of the AWS Elastic Beanstalk application to be created for this project.\rType: AWS::ElasticBeanstalk::ApplicationVersion\rProperties:\rApplicationName: !Ref \u0026#34;EBApplication\u0026#34;\rDescription: The application version number.\rSourceBundle: \u0026#34;target/travelbuddy\u0026#34; Elastic beanstalk update successful or not? Go to Elastic beanstalk, go to the travelbuddy app, and select Request Logs. Here there are 2 types of logs: Last 100 Lines and Full Logs. Select the appropriate type and download.\nCheck the downloaded log files to see why the server failed to start. Here are a few example problems:\nExample of communication between client and RDS server not working 05-Jun-2020 03:27:26.514 SEVERE [localhost-startStop-1] org.apache.tomcat.jdbc.pool.ConnectionPool.init Unable to create initial connections of pool.\rcom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\rThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\rat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\rat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\rat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836)\rat com.mysql.cj.jdbc.ConnectionImpl.\u0026lt;init\u0026gt;(ConnectionImpl.java:456)\rat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) In this example, the RDS endpoint declared in .eexentions is wrong. Repairing the RDS endpoint should fix this error.\nExample of a not existing table in RDS: java.sql.SQLSyntaxErrorException: Table \u0026#39;travelbuddy.flightspecial\u0026#39; doesn\u0026#39;t exist\rcom.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\rcom.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\rcom.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\rcom.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\rcom.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003)\rsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\rsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\rsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) To fix this error, log in to MySQL and access the database, repeat the database creation instructions in the first workshop.\n"
},
{
	"uri": "/4-deploy-windows-service/",
	"title": "Triển khai Windows Service sử dụng AWS CodeDeploy",
	"tags": [],
	"description": "",
	"content": "In this section, you will use AWS CodeDeploy to push a Windows Service onto a group of EC2 instances and have it automatically deploy, register, and start up.\nWindows Service named \u0026lsquo;Heartbeat\u0026rsquo;. It logs heartbeat messages to the log file periodically and also details its running state as it transitions from stopped to running and stops to make it easy for you to see AWS CodeDeploy in action when Software updates. You will not write code for this exercise, all compiled code is provided to you. Instead, you\u0026rsquo;ll focus on using AWS CodeDeploy to manage deployments for your team.\n"
},
{
	"uri": "/4-deploy-windows-service/4-deploy-using-codedeploy/",
	"title": "Deploy application using CodeDeploy",
	"tags": [],
	"description": "",
	"content": "Download sample Heartbeat Windows Service Right-click and save the file CodeDeployHeartbeatDemo.zip. Unzip the file. Attachments\rCodeDeployHeartbeatDemo.zip\r(287 ko)\rPlease take a moment to examine the contents of the appspec.yml file. It has the following contents:\nos: windows\rfiles:\r- source: Heartbeat.dll\rdestination: c:\\HeartbeatService\r- source: HeartbeatService.exe\rdestination: c:\\HeartbeatService\r- source: HeartbeatService.exe.config\rdestination: c:\\HeartbeatService\r- source: log4net.dll\rdestination: c:\\HeartbeatService\r- source: Logger.dll\rdestination: c:\\HeartbeatService\r- source: wintail.exe\rdestination: c:\\temp\rhooks:\rApplicationStop:\r- location: uninstall.ps1\rtimeout: 30\rAfterInstall:\r- location: install.ps1\rtimeout: 30\r- location: copywintail.ps1\rtimeout: 30 The appspec.yaml file outlines each source file contained in the unzipped ZIP archive and specifies the destination on the destination EC2 virtual machine where the files will be stored. This implementation uses only two lifecycle hooks - ApplicationStop and AfterInstall but you can use more if your case requires it. In this case, the powershell scripts (also included in the ZIP file archive) are used to stop the Window service and unregister the service (if it is already installed) and then after all files are copied, to register the service and start it, and also move the wintail helper in place to assist in viewing log files.\nPush deployment packages to S3 ready to deploy by CodeDeploy We are now ready to deploy the Heartbeat service to the EC2 instance. We have the deployment files on our machine and need to package them up and push them to S3. The AWS CLI CodeDeploy tool will help us do this.\nIn terminal, run cd CodeDeployHeartbeatDemo command. Use the following commands to pack files and push them to S3. aws deploy push --application-name idevelopDemo --source CodeDeployHeartbeatDemo --profile default --s3-location s3://idevelop-codedeployartefacts-\u0026lt;yourinitials\u0026gt;/CodeDeployHeartbeatDemo.zip Replace with your name the same as the name of the bucket created in the previous step. If successful, CLI will return To deploy with this revision, run:…, but you should not use this command line, instead use the command provided in the following step.\nEnter the following command to terminal. aws deploy create-deployment --application-name idevelopDemo --deployment-group-name HeartbeatInstances --deployment-config-name CodeDeployDefault.OneAtATime --description \u0026#34;Initial Deployment\u0026#34; --s3-location bucket=idevelop-codedeployartefacts-\u0026lt;yourinitials\u0026gt;,key=CodeDeployHeartbeatDemo.zip,bundleType=zip Replace with your name the same as the name of the bucket created in the previous step. If successful, CLI will return deploymentId\n"
},
{
	"uri": "/5-monitor-service/",
	"title": "Monitor your service",
	"tags": [],
	"description": "",
	"content": "In this section, you will monitor your Windows services.\n"
},
{
	"uri": "/6-challenge/",
	"title": "Challenge",
	"tags": [],
	"description": "",
	"content": "Challenge - Change application source\nIn this challenge, you will make one change to the BeanstalkManager application to automatically create an Elastic Beanstalk, Environment, and Version. These are the tasks that CodePipeline completes when you choose Elastic Beanstalk to deploy. This will give you some insight into the benefits of using the AWS Developer Tools to provision and deploy your applications and the powerful features they provide. To get started, you can refer to the Java SDK documentation at http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticbeanstalk/AWSElasticBeanstalkClient.html\nYou will need to create an application\npublic void CreateApp() { CreateApplicationRequest request = new CreateApplicationRequest() .withApplicationName(\u0026#34;my-app\u0026#34;) .withDescription(\u0026#34;my application\u0026#34;); CreateApplicationResult response = eb.createApplication(request); System.out.print(\u0026#34;my-app created!\u0026#34;); System.out.print(response); } Next, you\u0026rsquo;ll need to package up your deployment artifact (be it the TravelBuddy site we\u0026rsquo;re using, or you can create your own java web app) and upload that WAR file to S3. You learned how to programmatically upload files to an S3 bucket in the first exercise of this course. In the following tutorial, the file sample.war is a java application that has been packaged and uploaded to an S3 bucket named mybucket1234567890. To create an instance in Elastic Beanstalk, we write the CreateAppVersion() function as follows:\nprivate CreateApplicationRequest withApplicationName(String string) { return null; } public void CreateAppVersion() { CreateApplicationVersionRequest request = new CreateApplicationVersionRequest() .withApplicationName(\u0026#34;my-app\u0026#34;) .withAutoCreateApplication(true) .withDescription(\u0026#34;my-app-v1\u0026#34;) .withProcess(true) .withSourceBundle( new S3Location().withS3Bucket(\u0026#34;mybucket1234567890\u0026#34;).withS3Key( \u0026#34;sample.war\u0026#34;)).withVersionLabel(\u0026#34;v1\u0026#34;); CreateApplicationVersionResult response = eb.createApplicationVersion(request); } Import more necessary libraries\nimport com.amazonaws.services.elasticbeanstalk.model.CreateApplicationRequest; import com.amazonaws.services.elasticbeanstalk.model.CreateApplicationResult; import com.amazonaws.services.elasticbeanstalk.model.CreateApplicationVersionRequest; import com.amazonaws.services.elasticbeanstalk.model.CreateApplicationVersionResult; import com.amazonaws.services.elasticbeanstalk.model.S3Location; Next, we need to create the environment for this application.\npublic void CreateEnviroment() { ConfigurationOptionSetting cos = new ConfigurationOptionSetting(\u0026#34;aws:autoscaling:launchconfiguration\u0026#34;,\u0026#34;IamInstanceProfile\u0026#34;,\u0026#34;aws-elasticbeanstalk-ec2-role\u0026#34;); CreateEnvironmentRequest request = new CreateEnvironmentRequest() .withApplicationName(\u0026#34;my-app\u0026#34;) .withEnvironmentName(\u0026#34;env-my-app\u0026#34;) .withSolutionStackName(\u0026#34;64bit Amazon Linux 2 v3.1.7 running Corretto 8\u0026#34;) .withOptionSettings(cos); CreateEnvironmentResult response = eb.createEnvironment(request); System.out.print(response); } And import the following libraries:\nimport com.amazonaws.services.elasticbeanstalk.model.ConfigurationOptionSetting; import com.amazonaws.services.elasticbeanstalk.model.CreateEnvironmentRequest; import com.amazonaws.services.elasticbeanstalk.model.CreateEnvironmentResult; We have all the libraries to import:\nimport com.amazonaws.services.elasticbeanstalk.model.CreateApplicationRequest; import com.amazonaws.services.elasticbeanstalk.model.CreateApplicationResult; import com.amazonaws.services.elasticbeanstalk.model.CreateApplicationVersionRequest; import com.amazonaws.services.elasticbeanstalk.model.CreateApplicationVersionResult; import com.amazonaws.services.elasticbeanstalk.model.S3Location; import com.amazonaws.services.elasticbeanstalk.model.ConfigurationOptionSetting; import com.amazonaws.services.elasticbeanstalk.model.CreateEnvironmentRequest; import com.amazonaws.services.elasticbeanstalk.model.CreateEnvironmentResult; And the entire code to create Application and Environment is as follows:\npublic void CreateApp(){ CreateApplicationRequest request = new CreateApplicationRequest() .withApplicationName(\u0026#34;my-app\u0026#34;) .withDescription(\u0026#34;my application\u0026#34;); CreateApplicationResult response = eb.createApplication(request); System.out.print(\u0026#34;my-app created!\u0026#34;); System.out.print(response); } private CreateApplicationRequest withApplicationName(String string) { return null; } public void CreateAppVersion() { CreateApplicationVersionRequest request = new CreateApplicationVersionRequest() .withApplicationName(\u0026#34;my-app\u0026#34;) .withAutoCreateApplication(true) .withDescription(\u0026#34;my-app-v1\u0026#34;) .withProcess(true) .withSourceBundle( new S3Location().withS3Bucket(\u0026#34;mybuckt1234567890\u0026#34;).withS3Key( \u0026#34;sample.war\u0026#34;)).withVersionLabel(\u0026#34;v1\u0026#34;); CreateApplicationVersionResult response = eb.createApplicationVersion(request); } public void CreateEnviroment() { ConfigurationOptionSetting cos = new ConfigurationOptionSetting(\u0026#34;aws:autoscaling:launchconfiguration\u0026#34;,\u0026#34;IamInstanceProfile\u0026#34;,\u0026#34;aws-elasticbeanstalk-ec2-role\u0026#34;); CreateEnvironmentRequest request = new CreateEnvironmentRequest() .withApplicationName(\u0026#34;my-app\u0026#34;) .withEnvironmentName(\u0026#34;env-my-app\u0026#34;) .withSolutionStackName(\u0026#34;64bit Amazon Linux 2 v3.1.7 running Corretto 8\u0026#34;) .withOptionSettings(cos); CreateEnvironmentResult response = eb.createEnvironment(request); System.out.print(response); } Call these two functions in the Application.java file.\nUse the command mvn install or select Ctrl + F11 to launch the program. After successfully running, we have a my-app application deployed on env-my-app environment.\nNếu gặp lỗi trong quá trình chạy chương trình liên quan tới tạo môi trường cho ứng dụng tương tự như SolutionStackName 64bit Amazon Linux 2 v3.1.7 running Corretto 8 not found, bạn cần cập nhật Solution Stack Name. Mở CLI và chạy lệnh aws elasticbeanstalk list-available-solution-stacks |grep Corretto để liệt kê các Solution Stack Name corretto hiện có. Chọn Solution Stack Name Corretto 8 phù hợp\n"
},
{
	"uri": "/7-conclustion/",
	"title": "Conclusion",
	"tags": [],
	"description": "",
	"content": "Congratulation! Now you have succeeded: Use a monolithic java application running Spring in Tomcat in a desktop environment and perform \u0026rsquo;lift-and-shift\u0026rsquo; on Amazon Elastic Beanstalk PaaS with CI/CD pipeline for auto-update, using AWS CodeStar. Use Eclipse IDE to connect and test project source code from AWS CodeCommit repository installed by AWS CodeStar. Change source code, commit and push changes to AWS CodeCommit, and enable automated builds through AWS CodePipeline. "
},
{
	"uri": "/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]