<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.69.0" />
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Xác định lỗi :: DevAx - Monoliths to Microservices - Migrating the Monolith</title>

    
    <link href="/css/nucleus.css?1619161276" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1619161276" rel="stylesheet">
    <link href="/css/hybrid.css?1619161276" rel="stylesheet">
    <link href="/css/featherlight.min.css?1619161276" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1619161276" rel="stylesheet">
    <link href="/css/auto-complete.css?1619161276" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1619161276" rel="stylesheet">
    <link href="/css/theme.css?1619161276" rel="stylesheet">
    <link href="/css/hugo-theme.css?1619161276" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1619161276" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1619161276"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/3-automate-application-deployment/3-problem-determination/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1619161276"></script>
<script type="text/javascript" src="/js/auto-complete.js?1619161276"></script>
<script type="text/javascript">
    
        var baseurl = "";
    
</script>
<script type="text/javascript" src="/js/search.js?1619161276"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-prerequisites/" title="Chuẩn bị" class="dd-item 
        
        
        
        ">
      <a href="/1-prerequisites/">
          <b>1. </b>Chuẩn bị
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/1-prerequisites/1-create-environment/" title="Chuẩn bị môi trường" class="dd-item 
        
        
        
        ">
      <a href="/1-prerequisites/1-create-environment/">
          <b>1.1. </b>Chuẩn bị môi trường
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-configure-release-automation/" title="Cấu hình phát hành tự động" class="dd-item 
        
        
        
        ">
      <a href="/2-configure-release-automation/">
          <b>2. </b>Cấu hình phát hành tự động
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-configure-release-automation/1-setup-codestar-project/" title="Thiết lập một AWS CodeStar project " class="dd-item 
        
        
        
        ">
      <a href="/2-configure-release-automation/1-setup-codestar-project/">
          <b>2.1. </b>Thiết lập một AWS CodeStar project 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-configure-release-automation/2-connect-to-codecommit/" title="Kết nối Eclipse IDE với AWS Codecommit" class="dd-item 
        
        
        
        ">
      <a href="/2-configure-release-automation/2-connect-to-codecommit/">
          <b>2.2. </b>Kết nối Eclipse IDE với AWS Codecommit
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-automate-application-deployment/" title="Triển khai ứng dụng" class="dd-item 
        parent
        
        
        ">
      <a href="/3-automate-application-deployment/">
          <b>3. </b>Triển khai ứng dụng
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-automate-application-deployment/1-replace-application/" title="Thay thế ứng dụng mẫu" class="dd-item 
        
        
        
        ">
      <a href="/3-automate-application-deployment/1-replace-application/">
          <b>3.1. </b>Thay thế ứng dụng mẫu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-automate-application-deployment/2-challenge-deploy-through-pipeline/" title="Challenge - Triển khai thông qua Pipeline" class="dd-item 
        
        
        
        ">
      <a href="/3-automate-application-deployment/2-challenge-deploy-through-pipeline/">
          <b>3.2. </b>Challenge - Triển khai thông qua Pipeline
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-automate-application-deployment/3-problem-determination/" title="Xác định lỗi" class="dd-item 
        
        active
        
        ">
      <a href="/3-automate-application-deployment/3-problem-determination/">
          <b>3.3. </b>Xác định lỗi
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-automate-application-deployment/3-problem-determination/3-python27/" title="Python 2.7 EOS" class="dd-item 
        
        
        
        ">
      <a href="/3-automate-application-deployment/3-problem-determination/3-python27/">
          <b>3.3.1 </b>Python 2.7 EOS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-deploy-windows-service/" title="Triển khai Windows Service sử dụng AWS CodeDeploy" class="dd-item 
        
        
        
        ">
      <a href="/4-deploy-windows-service/">
          <b>4. </b>Triển khai Windows Service sử dụng AWS CodeDeploy
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-deploy-windows-service/1-create-ec2-instance/" title="Tạo máy ảo EC2" class="dd-item 
        
        
        
        ">
      <a href="/4-deploy-windows-service/1-create-ec2-instance/">
          <b>4.1. </b>Tạo máy ảo EC2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-deploy-windows-service/2-create-code-deploy-application/" title="Tạo ứng dụng CodeDeploy và Deployment Group" class="dd-item 
        
        
        
        ">
      <a href="/4-deploy-windows-service/2-create-code-deploy-application/">
          <b>4.1. </b>Tạo ứng dụng CodeDeploy và Deployment Group
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-deploy-windows-service/3-create-deployment-s3-bucket/" title="Tạo Triển khai S3 Bucket" class="dd-item 
        
        
        
        ">
      <a href="/4-deploy-windows-service/3-create-deployment-s3-bucket/">
          <b>4.3. </b>Tạo Triển khai S3 Bucket
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-deploy-windows-service/4-deploy-using-codedeploy/" title="Triển khai ứng dụng sử dụng CodeDeploy" class="dd-item 
        
        
        
        ">
      <a href="/4-deploy-windows-service/4-deploy-using-codedeploy/">
          <b>4.4. </b>Triển khai ứng dụng sử dụng CodeDeploy
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-monitor-service/" title="Giám sát dịch vụ của bạn" class="dd-item 
        
        
        
        ">
      <a href="/5-monitor-service/">
          <b>5. </b>Giám sát dịch vụ của bạn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/5-monitor-service/1-monitor-service/" title="Sử dụng Eclipse IDE" class="dd-item 
        
        
        
        ">
      <a href="/5-monitor-service/1-monitor-service/">
          <b>5.1. </b>Sử dụng Eclipse IDE
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/5-monitor-service/2-optional-confirm-codedeploy-agent/" title="(Optional) Xác nhận cài đặt CodeDeploy agent " class="dd-item 
        
        
        
        ">
      <a href="/5-monitor-service/2-optional-confirm-codedeploy-agent/">
          <b>5.2. </b>(Optional) Xác nhận cài đặt CodeDeploy agent 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/5-monitor-service/3-optional-use-sdk-query-elastic-beanstalk/" title="(Optional) Sử dụng SDK để truy vấn Elastic Beanstalk" class="dd-item 
        
        
        
        ">
      <a href="/5-monitor-service/3-optional-use-sdk-query-elastic-beanstalk/">
          <b>5.3. </b>(Optional) Sử dụng SDK để truy vấn Elastic Beanstalk
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/6-challenge/" title="Thử thách - Thay đổi mã nguồn ứng dụng" class="dd-item 
        
        
        
        ">
      <a href="/6-challenge/">
          <b>6. </b>Thử thách - Thay đổi mã nguồn ứng dụng
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/7-conclustion/" title="Kết luận" class="dd-item 
        
        
        
        ">
      <a href="/7-conclustion/">
          <b>7. </b>Kết luận
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/660548818043427/"><i class='fab fa-facebook'></i> AWS Study Group - FB Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/3-automate-application-deployment/3-problem-determination/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/3-automate-application-deployment/3-problem-determination/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
    

    

    
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Cấu hình tự động phát hành ứng dụng</a> > <a href='/3-automate-application-deployment/'>Triển khai ứng dụng</a> > Xác định lỗi
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Xác định lỗi
            </h1>
          

        



	<h5 id="kiểm-tra-tập-tun-buildspecyml">Kiểm tra tập tun buildspec.yml</h5>
<p>Tập tin <strong>buildspec.yml</strong> là một phần quan trọng mà bạn cần phải đảm bảo tính chính xác của tập tin này. Tập tin này sẽ chạy qua các giai đoạn mà bạn có thể thấy trong bảng điều khiển bên dưới CodeBuild trong log của nó. 
Tập tin này được chia thành nhiều phần nhỏ</p>
<p>install - loại cài đặt mà bạn muốn chạy code. Trong trường hợp này, chúng ta sẽ sử dụng openjdk8.</p>
<pre><code>phases:
  install:
    runtime-versions:
      java: openjdk8
    commands:
      - pip install --upgrade awscli
</code></pre><p>Tiếp theo là các lệnh bạn muốn chạy trước khi thực hiện build project. Đây là yêu cầu trước khi build project. Và trong ví dụ này, chúng ta sẽ chạy lệnh mvn để biên dịch tất cả các thiết lập cần thiết.</p>
<pre><code>pre_build:
  commands:
    - mvn clean compile test
</code></pre><p>Kế tiếp là tạo build stage</p>
<pre><code>build:
  commands:
    - mvn war:exploded
</code></pre><p>Sau khi build mvn, là cách thiết lập môi trường bắt buộc cho mỗi môi trường trong .ebextensions được đọc bởi các ứng dụng được yêu cầu</p>
<pre><code>  post_build:
    commands:
      - cp -r .ebextensions/ target/travelbuddy/
      - aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template-file template-export.yml

      # Do not remove this statement. This command is required for AWS CodeStar projects.
      # Update the AWS Partition, AWS Region, account ID and project ID in the project ARN on template-configuration.json file so AWS CloudFormation can tag project resources.
      - sed -i.bak 's/\$PARTITION\$/'${PARTITION}'/g;s/\$AWS_REGION\$/'${AWS_REGION}'/g;s/\$ACCOUNT_ID\$/'${ACCOUNT_ID}'/g;s/\$PROJECT_ID\$/'${PROJECT_ID}'/g' template-configuration.json
artifacts:
  type: zip
  files:
    - template-export.yml
    - template-configuration.json
</code></pre><ol start="2">
<li>Kiểm tra bảng điều khiển <strong>CodeBuild</strong> 
Kiểm tra bảng điều khiển CodeBuild và xem có lỗi nào xuất hiện trong quá trình triển khai hay không.
Nếu có, chọn xem chi tiết để biết lỗi xảy ra là gì.
<img src="../../../images/3/31.png?width=90pc" alt="Error">
Truy cập Buildlog tab và cuộn xuống phần log báo lỗi.
Trong ví dụ này, bạn có thể thấy địa chỉ truy cập của root trong tập tin template.yml không chính xác.</li>
</ol>
<pre><code>Unable to upload artifact target/ROOT referenced by SourceBundle parameter of EBApplicationVersion resource.
Parameter SourceBundle of resource EBApplicationVersion refers to a file or folder that does not exist /codebuild/output/src812543603/src/target/ROOT

[Container] 2020/06/05 02:16:17 Command did not exit successfully aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template-file template-export.yml exit status 255
[Container] 2020/06/05 02:16:17 Phase complete: POST_BUILD State: FAILED
[Container] 2020/06/05 02:16:17 Phase context status code: COMMAND_EXECUTION_ERROR Message: Error while executing command: aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template-file template-export.yml. Reason: exit status 255
</code></pre><p>Đây là lỗi trong tập tin template.yml cần được thay đổi:</p>
<pre><code>EBApplicationVersion:
  Description: The version of the AWS Elastic Beanstalk application to be created for this project.
  Type: AWS::ElasticBeanstalk::ApplicationVersion
  Properties:
    ApplicationName: !Ref &quot;EBApplication&quot;
    Description: The application version number.
    SourceBundle: &quot;target/ROOT&quot;
</code></pre><p>thành</p>
<pre><code>EBApplicationVersion:
  Description: The version of the AWS Elastic Beanstalk application to be created for this project.
  Type: AWS::ElasticBeanstalk::ApplicationVersion
  Properties:
    ApplicationName: !Ref &quot;EBApplication&quot;
    Description: The application version number.
    SourceBundle: &quot;target/travelbuddy&quot;
</code></pre><ol start="3">
<li>Cập nhật Elastic beanstalk có thành công hay không? 
Truy cập Elastic beanstalk, vào ứng dụng travelbuddy và chọn Request Logs.
<img src="../../../images/3/32.png?width=90pc" alt="RequestLogs">
Ở đây có 2 loại log là Last 100 Lines và Full Logs. Chọn loại phù hợp và tải về. 
<img src="../../../images/3/33.png?width=90pc" alt="RequestLogs">
Kiểm tra các tập tin log đã tải về để xem tại sao máy chủ lại không khởi động được.
Dưới đây là một vài vấn đề ví dụ:</li>
</ol>
<ul>
<li>Ví dụ về việc giao tiếp giữa client và RDS server không hoạt động</li>
</ul>
<pre><code>05-Jun-2020 03:27:26.514 SEVERE [localhost-startStop-1] org.apache.tomcat.jdbc.pool.ConnectionPool.init Unable to create initial connections of pool.
	com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
		at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
		at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
		at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836)
		at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456)
		at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
</code></pre><p>Trong ví dụ này, RDS endpoint được khai báo trong .ebexentions sai. Sửa lại RDS endpoint sẽ khắc phục được lỗi này.</p>
<ul>
<li>Ví dụ về việc không tồn tại table trong RDS:</li>
</ul>
<pre><code>java.sql.SQLSyntaxErrorException: Table 'travelbuddy.flightspecial' doesn't exist
	com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
</code></pre><p>Để khắc phục lỗi này, đăng nhập vào mysql và truy cập vào database, thực hiện lại các phần tạo databse đã hướng dẫn ở bài lab đầu tiên.</p>
<h5 id="khắc-phục-sự-cố-ứng-dụng-sau-khi-thay-thế-mã-nguồn">Khắc phục sự cố ứng dụng sau khi thay thế mã nguồn.</h5>
<p>Việc khởi tạo thành công, tuy nhiên bạn không thể truy cập ứng dụng của mình. Làm theo các bước sau để điều tra và giải quyết vấn đề.
4. Kiểm tra CodeStar Pipeline xem có lỗi nào hay không
<img src="../../../images/3/34.png?width=90pc" alt="Pipeline">
5. Kiểm tra phần Deploy và chọn ExecuteChangeSet Details
6. Kiểm tra tại ElasticBeanstalk 
7. Xem logs của ứng dụng <strong>travelbuddy</strong></p>
<pre><code>23-Sep-2020 06:16:13.732 SEVERE [localhost-startStop-1] org.apache.tomcat.jdbc.pool.ConnectionPool.init Unable to create initial connections of pool.
	com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
		at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
</code></pre><p>Dường như ứng dụng không được phép kết nối tới Database.
Để ứng dụng có thể giao tiếp được với Database, ta cần thêm SecurotyGroup từ ElasticBeanstalk Enviroment tới SecurityGroup từ RDS.</p>
<ol>
<li>Truy cập EC2 và chọn Security Groups
![SecurityGroup]](../../../images/3/35.png?width=90pc)</li>
<li>Chọn <strong>DBSecurityGroup</strong> và chọn tab <strong>Inbound rules</strong></li>
<li>Chọn <strong>Edit inbound rules</strong>
<img src="../../../images/3/36.png?width=90pc" alt="SecurityGroup"></li>
<li>Chọn dịch vụ MySQL/Aurora và chọn SecurityGroup ID từ travelbuddyapp. Chọn <strong>Save rules</strong>
<img src="../../../images/3/37.png?width=90pc" alt="SecurityGroup"></li>
<li>Kiểm tra lại ứng dụng và thấy rằng có thể truy cập được ứng dụng một cách bình thường.</li>
</ol>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/3-automate-application-deployment/2-challenge-deploy-through-pipeline/" title="Challenge - Triển khai thông qua Pipeline"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/3-automate-application-deployment/3-problem-determination/3-python27/" title="Python 2.7 EOS" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1619161276"></script>
    <script src="/js/perfect-scrollbar.min.js?1619161276"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1619161276"></script>
    <script src="/js/jquery.sticky.js?1619161276"></script>
    <script src="/js/featherlight.min.js?1619161276"></script>
    <script src="/js/highlight.pack.js?1619161276"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1619161276"></script>
    <script src="/js/learn.js?1619161276"></script>
    <script src="/js/hugo-learn.js?1619161276"></script>

    <link href="/mermaid/mermaid.css?1619161276" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1619161276"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
